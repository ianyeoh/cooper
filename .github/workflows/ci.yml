name: ci
description: Lint, build, and test
permissions:
  contents: read
  pull-requests: write

on:
  workflow_call:
    inputs:
      ref:
        description: GitHub branch ref to run checks against
        type: string
        required: false

jobs:
  backend:
    runs-on: ubuntu-latest
    steps:
      - uses: ianyeoh/cooper/.github/actions/tests/backend
        with:
          ref: ${{ inputs.ref }}

  e2e:
    runs-on: ubuntu-latest
    steps:
      - uses: ianyeoh/cooper/.github/actions/tests/e2e
        with:
          ref: ${{ inputs.ref }}
